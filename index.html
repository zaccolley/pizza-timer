<!DOCTYPE html>
<html lang="en">

<head>
  <title>Pizza Timer</title>
  <meta name="Description" content="A timer for pair programming">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#ffe0e0">

  <link rel="manifest" href="/site.manifest">

  <link rel="shortcut icon" href="images/pizza.png" type="image/x-icon" />

  <link rel="stylesheet" type="text/css" href="style.css">

  <!-- development version, includes helpful console warnings -->
  <!--   <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->

  <!-- production version, optimized for size and speed -->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>

  <script src="client.js" defer></script>
</head>

<body>
  <div id="app" :class="{ 'color-scheme--dark': sharedState.colorScheme === 'dark', 'color-scheme--light': sharedState.colorScheme === 'light' }">
    <main class="main">
      <div
        class="faded"
        :class="{ 'faded--active': sharedState.timerRunning }"
      >
        <h1 class="title">
          Pizza Timer
        </h1>
        <p class="sub-title">A timer for pair programming</p>
      </div>

      <div class="timer">
        {{ sharedState.timerRemainingTimeFormatted }}

        <loader
          :is-timer-running="sharedState.timerRunning"
          :timer-progress-percentage="sharedState.timerProgressPercentage"
        >
        </loader>
      </div>

      <button
        v-on:click="handleStartPauseTimerClick"
        class="button button--bigger button--primary"
      >
        {{ sharedState.timerRunning ? 'Stop' : 'Start' }}
      </button>

      <button
        v-on:click="handleResetTimerClick"
        class="button button--bigger button--secondary"
      >
        Reset
      </button>

      <h2>
        Timer
      </h2>

      <div class="input">
        <label class="input__label" for="timer-end-time">
          Timer end time (minutes)
        </label>
        <input
          id="timer-end-time"
          class="input__field"
          v-model="sharedState.timerEndTimeMinutes"
          v-on:change="handleTimerEndTimeMinutesChange"
          type="number"
          min="1"
          step="1"
        />
      </div>

      <toggle-button
        :id="'timer-repeat-at-end-enabled'"
        :on-click="handleTimerRepeatAtEndEnabledClick"
        :is-active="sharedState.timerRepeatAtEndEnabled"
        :label="'Repeat timer automatically'"
      >
      </toggle-button>

      <h2>
        Audio
      </h2>

      <toggle-button
        :id="'audio-enabled'"
        :on-click="handleToggleAudioClick"
        :is-active="sharedState.audioEnabled"
        :label="'Audio'"
      >
      </toggle-button>

      <div v-if="sharedState.audioEnabled" class="input">
        <label class="input__label" for="sound-select">
          Sound
        </label>

        <select
          id="sound-select"
          :disabled="!sharedState.audioEnabled"
          v-on:change="handleAudioSelectChange"
          class="input__select"
        >
          <option value="gong" :selected="sharedState.soundName === 'gong'">
            <span aria-hidden="true">🍃</span> Gong
          </option>
          <option value="bell" :selected="sharedState.soundName === 'bell'">
            <span aria-hidden="true">🔔</span> Bell
          </option>
          <option value="foghorn" :selected="sharedState.soundName === 'foghorn'">
            <span aria-hidden="true">🚢</span> Foghorn
          </option>
          <option value="music-box" :selected="sharedState.soundName === 'music-box'">
            <span aria-hidden="true">🎶</span> Music Box
          </option>
          <option value="chief-chef" :selected="sharedState.soundName === 'chief-chef'">
            <span aria-hidden="true">👨‍🍳</span> Chief Chef
          </option>
          <option value="marshall-house" :selected="sharedState.soundName === 'marshall-house'">
            <span aria-hidden="true">🏠</span> Marshall House
          </option>
          <option value="beano-yelp" :selected="sharedState.soundName === 'beano-yelp'">
            <span aria-hidden="true">😱</span> Beano Yelp
          </option>
        </select>
      </div>

      <button
        v-if="sharedState.audioEnabled"
        v-on:click="handleTestAudioClick"
        class="button button--secondary"
      >
        Test audio
      </button>

      <h2>
        Notifications
      </h2>

      <toggle-button
        :id="'notifications-enabled'"
        :on-click="handleToggleNotificationsClick"
        :is-active="sharedState.notificationsEnabled"
        :label="'Notifications'"
      >
      </toggle-button>
      <p v-if="sharedState.notificationPermission === 'denied'" class="message message--disabled">
        Notifications are blocked. You'll need to reallow them to handle notifications.
      </p>

      <button
        v-if="sharedState.notificationsEnabled"
        v-on:click="handleTestNotificationsClick"
        class="button button--secondary"
      >
        Test push notification
      </button>

      <h2>Dark mode</h2>

      <p class="message">
        Force it to be dark/light mode. Matches your default computer settings when set to 'Auto'.
      </p>

      <div class="input">
        <label class="input__label" for="color-scheme-select">
          Color scheme
        </label>

        <select
          id="color-scheme-select"
          v-on:change="handleColorSchemeSelectChange"
          class="input__select"
        >
          <option value="auto" :selected="sharedState.colorScheme === 'auto'">
            Auto <span aria-hidden="true">🌬️</span>
          </option>
          <option value="dark" :selected="sharedState.colorScheme === 'dark'">
            Dark <span aria-hidden="true">🌚</span>
          </option>
          <option value="light" :selected="sharedState.colorScheme === 'light'">
            Light <span aria-hidden="true">🌞</span>
          </option>
        </select>
      </div>

      <div v-if="sharedState.colorScheme === 'auto'">
        <p class="message" v-if="!sharedState.browserColorScheme">
          No specific color scheme detected.
        </p>
        <p class="message" v-if="sharedState.browserColorScheme === 'dark'">
          Dark mode color scheme detected.
        </p>
        <p class="message" v-if="sharedState.browserColorScheme === 'light'">
          Light mode color scheme detected.
        </p>
      </div>
    </main>

    <footer class="footer">
      <h2>Data</h2>

      <button v-on:click="handleClearDataClick" class="button button--tertiary">
        Clear data
      </button>

      <h2>Credits</h2>

      <ul class="footer__credits">
        <li class="footer__credits__item">
          <a
            rel="noreferrer"
            class="footer__credits__link"
            href="https://web.archive.org/web/20091022051105/http://geocities.com/jhosel/index.html"
          >
            Pizza image
          </a>
        </li>
        <li class="footer__credits__item">
          <a
            rel="noreferrer"
            class="footer__credits__link"
            href="http://soundbible.com/1815-A-Tone.html"
          >
            Gong sound
          </a>
        </li>
        <li class="footer__credits__item">
          <a
            rel="noreferrer"
            class="footer__credits__link"
            href="http://soundbible.com/2218-Service-Bell-Help.html"
          >
            Bell sound
          </a>
        </li>
        <li class="footer__credits__item">
          <a
            rel="noreferrer"
            class="footer__credits__link"
            href="http://soundbible.com/2142-FogHorn-Barge.html"
          >
            Foghorn sound
          </a>
        </li>
        <li class="footer__credits__item">
          <a
            rel="noreferrer"
            class="footer__credits__link"
            href="http://soundbible.com/1619-Music-Box.html"
          >
            Music box sound
          </a>
        </li>
      </ul>


      <a class="footer__link" href="https://zaccolley.com">
        <span aria-hidden="true">🍕</span> Made by Zac
      </a>

      <a class="footer__link" href="https://github.com/zaccolley/pizza-timer">
        <span aria-hidden="true">💽</span> Issues/code on GitHub
      </a>
    </footer>
  </div>
</body>

</html>
